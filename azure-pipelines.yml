trigger: none

pool:
  vmImage: 'ubuntu-latest'

steps:
  - checkout: self

  - task: TerraformTaskV4@4
    inputs:
      provider: 'azurerm'
      command: 'init'

  - task: TerraformCLI@1
    inputs:
      command: 'init'
      workingDirectory: '$(System.DefaultWorkingDirectory)/terraform'
      allowTelemetryCollection: true    

  - task: TerraformDrift@1
    inputs:
      workingDirectory: 'terraform'